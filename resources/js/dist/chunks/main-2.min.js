"use strict";(self.webpackChunkTreactionNewsletterInput=self.webpackChunkTreactionNewsletterInput||[]).push([[2],{4781:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});a(2222),a(7042);var r=function(){var e=this,t=e._self._c;return t("form",{ref:"newsletterForm",attrs:{id:"newsletter-input-form_"+e._uid,method:"post"},on:{submit:function(t){return t.preventDefault(),e.validateData.apply(null,arguments)}}},[t("div",{staticClass:"row"},[e.showNameInputs?t("div",{staticClass:"col-6"},[t("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[t("label",{attrs:{for:"first-name-input_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterFirstName")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],attrs:{id:"first-name-input_"+e._uid,type:"text","data-validate-ref":"/[.:\\/\\d]/g","data-testing":"nl-first-name"},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}})])]):e._e(),e._v(" "),e.showNameInputs?t("div",{staticClass:"col-6 pl-0"},[t("div",{staticClass:"input-unit",attrs:{"data-validate":"!regex"}},[t("label",{attrs:{for:"last-name-input_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterLastName")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],attrs:{id:"last-name-input_"+e._uid,type:"text","data-validate-ref":"/[.:\\/\\d]/g","data-testing":"nl-last-name"},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})])]):e._e(),e._v(" "),t("div",{staticClass:"col-12"},[t("div",{staticClass:"input-group"},[t("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[t("label",{attrs:{for:"email-input-id_"+e._uid}},[e._v(e._s(e.$translate("Ceres::Template.newsletterEmail"))+" "+e._s(e.$translate("Ceres::Template.newsletterIsRequiredFootnote")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{id:"email-input-id_"+e._uid,type:"email",autocomplete:"email","data-testing":"nl-mail"},domProps:{value:e.email},on:{focus:function(t){e.loadRecaptcha=!0},input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{autocomplete:"none",type:"text",name:"username",tabindex:"-1"},domProps:{value:e.honeypot},on:{input:function(t){t.target.composing||(e.honeypot=t.target.value)}}})])]),e._v(" "),e.showPrivacyPolicyCheckbox?t("div",{staticClass:"col-12"},[t("div",{staticClass:"form-check small",attrs:{"data-validate":""}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.privacyPolicyValue,expression:"privacyPolicyValue"}],staticClass:"form-check-input",attrs:{id:"privacy-policy-accept-id_"+e._uid,type:"checkbox",name:"privacy-policy-accept","data-testing":"nl-policy"},domProps:{checked:Array.isArray(e.privacyPolicyValue)?e._i(e.privacyPolicyValue,null)>-1:e.privacyPolicyValue},on:{change:function(t){var a=e.privacyPolicyValue,r=t.target,i=!!r.checked;if(Array.isArray(a)){var n=e._i(a,null);r.checked?n<0&&(e.privacyPolicyValue=a.concat([null])):n>-1&&(e.privacyPolicyValue=a.slice(0,n).concat(a.slice(n+1)))}else e.privacyPolicyValue=i}}}),e._v(" "),t("label",{staticClass:"form-check-label",attrs:{for:"privacy-policy-accept-id_"+e._uid},domProps:{innerHTML:e._s(e.privacyPolicyText)}})])]):e._e(),e._v(" "),t("div",{staticClass:"col-12 mt-3"},[t("div",{staticClass:"input-group-btn"},[t("button",{staticClass:"btn btn-block btn-primary btn-appearance",attrs:{type:"button",disabled:e.isDisabled,"data-testing":"nl-send"},on:{click:e.validateData}},[t("icon",{attrs:{icon:"paper-plane-o",loading:e.isDisabled}}),e._v("\n          "+e._s(e.$translate("Ceres::Template.newsletterSubscribeButtonLabel"))+"\n        ")],1)])]),e._v(" "),t("div",{staticClass:"col-12 text-right small mt-2"},[e._v("\n      "+e._s(e.$translate("Ceres::Template.newsletterIsRequiredFootnote"))+" "+e._s(e.$translate("Ceres::Template.newsletterIsRequired"))+"\n    ")])]),e._v(" "),e.$ceres.config.global.googleRecaptchaApiKey&&e.loadRecaptcha?t("recaptcha"):e._e()],1)};r._withStripped=!0;var i;a(9653),a(1539),a(4747),a(1249),a(7327),a(8309),a(6565),a(7943),a(6385),a(4851),a(2771),a(9304),a(1720),a(7902),a(18),a(4225),a(3206),a(9778),a(9676),a(2145),a(6712),a(1415),a(9658),a(7933),a(1791),a(743);function n(e){return null===e}function s(e){i=$(e);var t=[];return i.find("[data-validate]").each((function(e,a){o($(a))||t.push(a)})),t}function o(e){var t=$(e);if(!t[0].attributes.hasOwnProperty("data-validate"))return!0;var a=t.attr("data-validate").split("|").map((function(e){return e.trim()}))||["text"],r=t.attr("data-required-count"),n=!1;return u(t).each((function(e,t){var s=$(t),o=a[e]||a[0];return!function(e){return e.is(":visible")&&e.is(":enabled")}(s)||(s.is('[type="checkbox"], [type="radio"]')?(function(e,t,a){var r=e.attr("name"),n=i.find('[name="'+r+'"]'),s=null,o=1,l=1;s=a?{min:o=a.split(",")[0],max:l=a.split(",")[1]}:p(t)||{min:o,max:l};var c=n.filter(":checked").length;return c>=s.min&&c<=s.max}(s,o,r)||(n=!0),!0):s.is("select")?(function(e,t){var a=e.children("option:selected").text();return""!=$.trim(a)}(s)||(n=!0),!0):(o.startsWith("!")?l(s,o.replace("!",""))&&(n=!0):l(s,o)||(n=!0),!1))})),!n}function l(e,t){switch(t){case"text":case"file":return c(e);case"number":return c(e)&&$.isNumeric($.trim(e.val()));case"ref":return function(e,t){$(t).length>0&&(t=$.trim($(t).val()));return e===t}($.trim(e.val()),$.trim(e.attr("data-validate-ref")));case"date":return function(e){var t=e.val().match(/^(?:(\d{1,2})[.\/-](\d{1,2})[.\/-](\d{4}))|(?:(\d{4})[.\/-](\d{1,2})[.\/-](\d{1,2}))$/);if(n(t))return!1;var a=t[3]||t[4],r=t[2]||t[5],i=t[1]||t[6];if(a>=1901&&r>=1&&r<=12&&i>=1&&i<=31)return!0;return!1}(e);case"mail":return function(e){return t=e.val(),new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t);var t}(e);case"password":return function(e){return new RegExp(/^(?=.*[A-Za-z])(?=.*\d)\S{8,}$/).test(e.val())}(e);case"regex":return function(e){var t=e.attr("data-validate-ref"),a=t.startsWith("/")?p(t):new RegExp(t);return c(e)&&a.test($.trim(e.val()))}(e);default:return console.error('Form validation error: unknown validation property: "'+t+'"'),!0}}function c(e){return $.trim(e.val()).length>0}function u(e){return e.is("input, select, textarea")?e:e.find("input, select, textarea")}function p(e){return new Function("return ".concat(e,";"))()}var d={validate:function(e){var t=$.Deferred(),a=s(e);return a.length>0?t.rejectWith(e,[a]):t.resolveWith(e),t},getInvalidFields:s,markInvalidFields:function(e,t){t=t||"error",$(e).each((function(e,a){var r=$(a);r.addClass(t),u(r).on("click.removeErrorClass keyup.removeErrorClass change.removeErrorClass",(function(){if(o(r)){if(r.removeClass(t),r.is('[type="radio"], [type="checkbox"]')){var e=r.attr("name");$("."+t+'[name="'+e+'"]').removeClass(t)}u(r).off("click.removeErrorClass keyup.removeErrorClass change.removeErrorClass")}}))}))},markFailedValidationFields:function(e,t,a){i=$(e),a=a||"error",i.find("[data-model]").each((function(e,r){var i=$(r),n=i.attr("data-model");if(n in t){i.addClass(a);var s=i.find("label")[0].innerHTML.replace("*","");if(s){var o=n.replace(/([A-Z])/g," $1").toLowerCase();t[n][0]=t[n][0].replace(o.replace("_"," "),s)}}}))},unmarkAllFields:function(e){(i=$(e)).find("[data-validate]").each((function(e,t){var a=$(t);a.removeClass("error"),u(a).off("click.removeErrorClass keyup.removeErrorClass change.removeErrorClass")}))}};a(2932);var m={props:{showNameInputs:{type:Boolean,default:!1},showPrivacyPolicyCheckbox:{type:Boolean,default:!0},emailFolder:{type:Number,default:0},treactionUuid:{type:text,default:""},treactionApikey:{type:text,default:""},treactionAccountNumber:{type:text,default:""}},data:function(){return{firstName:"",lastName:"",email:"",isDisabled:!1,privacyPolicyValue:!1,honeypot:"",loadRecaptcha:!1}},computed:{privacyPolicyText:function(){var e='<a href="'+App.urls.privacyPolicy+'" target="_blank"><span class="text-primary text-appearance">'+this.$translate("Ceres::Template.checkoutPrivacyPolicy",{hyphen:"&shy;"})+"</span></a>";return this.$translate("Ceres::Template.newsletterAcceptPrivacyPolicy",{policy:e})+this.$translate("Ceres::Template.newsletterIsRequiredFootnote")}},methods:{validateData:function(){var e=this;this.isDisabled=!0,d.validate($("#newsletter-input-form_"+this._uid)).done((function(){e.save()})).fail((function(t){d.markInvalidFields(t,"error"),t.filter((function(e){return null!==e.dataset.validate})).map((function(e){return{type:e.dataset.validate,name:e.innerText}})).forEach((function(t){"!regex"===t.type&&window.CeresNotification.error(e.$translate("Ceres::Template.newsletterNotAllowedCharacters",{name:t.name}))})),e.isDisabled=!1}))},save:function(){var e,t,a,r=this,i=this.$el.querySelector("[data-recaptcha]");if(App.config.global.googleRecaptchaApiKey&&(!window.grecaptcha||!i))return window.CeresNotification.error(this.$translate("Ceres::Template.newsletterAcceptRecaptchaCookie")),void(this.isDisabled=!1);(e=this.$el,t=Promise.resolve(null),a=e.querySelector("[data-recaptcha]"),window.grecaptcha&&a&&(t=new Promise((function(e,t){3===App.config.global.googleRecaptchaVersion?window.grecaptcha.execute(App.config.global.googleRecaptchaApiKey,{action:"homepage"}).then((function(a){a?e(a):t()})):(window.grecaptcha.execute(a.dataset.recaptcha),a.querySelector('[name="g-recaptcha-response"]').addEventListener("recaptcha-response",(function(r){r.target.value?e(r.target.value):(window.grecaptcha.reset(a.dataset.recaptcha),t())})))}))),t).then((function(e){if(""!==r.honeypot)window.CeresNotification.warn(r.$translate("Ceres::Template.newsletterHoneypotWarning")),r.resetInputs();else{var t={base:{account_number:r.treactionAccountNumber,apikey:r.treactionApikey,uuid:r.treactionUuid},contact:{standard:[{field_name:"email",field_value:r.email,datatype:"Email",regex:"^[_a-zA-Z0-9-]+(.[_a-zA-Z0-9-]+)*@[a-zA-Z0-9-]+(.[a-zA-Z0-9-]+)*(.[a-z]{2,9})$",required:"1"}],custom:[]}},a=JSON.stringify(t),i=btoa(a);$.ajax({url:"https://api-in-one.net/v2.0/webhook/receive",type:"POST",async:!1,timeout:0,header:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"PUT, GET, POST, DELETE","Access-Control-Allow-Headers":"access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,access-control-max-age,content-type,bearer","Access-Control-Max-Age":"86400"},data:i}).done((function(e){return r.successNotification()})).done((function(e){return r.resetInputs()})).fail((function(e){return r.errorNotification()})).always((function(e){return r.isDisabled=!1})).always(r.resetRecaptcha())}}))},resetInputs:function(){this.firstName="",this.lastName="",this.email="",this.privacyPolicyValue=!1},successNotification:function(){window.CeresNotification.success(this.$translate("Ceres::Template.newsletterSuccessMessage"))},errorNotification:function(){window.CeresNotification.error(this.$translate("Ceres::Template.newsletterErrorMessage"))},resetRecaptcha:function(){if(2===App.config.global.googleRecaptchaVersion&&window.grecaptcha){var e=this.$el.querySelector("[data-recaptcha]");window.grecaptcha.reset(e)}}}},v=(0,a(1900).Z)(m,r,[],!1,null,null,null).exports}}]);
//# sourceMappingURL=main-2.min.js.map